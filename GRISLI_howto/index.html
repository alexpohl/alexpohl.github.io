<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Alexandre  POHL | GRISLI version 8, a (non-official) user-guide</title>
<meta name="description" content="None
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="/assets/github.css"/>

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåç</text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/GRISLI_howto/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       <span class="font-weight-bold">Alexandre</span>   POHL
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/Contact/">
                Contact
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/Presentations/">
                Presentations
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/Publications/">
                Publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/research/">
                Research
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/Materials/">
                Research materials
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/Resume/">
                Resume
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">GRISLI version 8, a (non-official) user-guide</h1>
    <p class="post-description">Tutorial to run the GRISLI (Grenoble ice sheet and land ice) model, with specific indications for the cluster CCUB in Dijon.</p>
  </header>

  <article style="font-size: 0.85rem;">
    <p>A user-guide for the GRISLI (Grenoble ice sheet and land ice) model at U. Bourgogne. A 3D ice-sheet model designed for deep-time, large-scale investigations.</p>

<p>This page is not intended to replace the official <a href="https://www.cmcc.it/publications/rp0249-grenoble-ice-shelf-and-land-ice-model-a-practical-user-guide">GRISLI user guide</a>, but rather to provide additional / alternative material.</p>

<p>Updated model versions are now available <a href="https://gmd.copernicus.org/articles/11/5003/2018/">here</a> for instance. This tutorial refers to the version used by e.g. <a href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016PA002928">Pohl et al. (2016)</a> or <a href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2013PA002593">Ladant et al. (2014)</a>.</p>

<p>Information on the CCUB cluster can be found <a href="https://ccub.u-bourgogne.fr/dnum-ccub/spip.php?article959">here</a>.</p>

<p>Although the tutorial is built with many sections for readibility, I suggest progressing linearly since knowhow acquired in section n will sometimes be useful for section n+1.</p>

<p><strong>Tutorial status</strong>: this page is finished, but the tutorial has never been tested yet. Happy to have feedbacks, and to revise and add content.</p>

<h1 id="introduction">Introduction</h1>

<p>This tutorial describes how to run the GRISLI (Grenoble ice sheet and land ice) model (<a href="https://agupubs.onlinelibrary.wiley.com/doi/abs/10.1029/2001jd900232">Ritz, 2001</a>) on the linux cluster of Univ. Bourgogne (CCUB, Dijon). It should be easy to adapt to other clusters.</p>

<p>This tutorial shows how to use the model in a simple way, by forcing the model with climatic boundary conditions (precipitations and surface air temperature) derived from the atmospheric general circulation model LMDZ, using a standard, large model grid of resolution 40 km √ó 40 km centered over the South Pole. <a href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2013PA002593">Ladant et al. (2014)</a> developed an asynchronous coupling method permitting to account for the feedbacks of the ice sheet on global climate (also used by <a href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016PA002928">Pohl et al. (2016)</a>); this more sophisticated setup is not described here. The documentation may be updated later upon request. As for now, the experimental setup desribed in this tutorial only permits to investigate glacial inception a-la <a href="https://www.nature.com/articles/ncomms12771">Ladant et al. (2016)</a>; it cannot be used to quantify climate-ice-sheet equilibria (For a comparison, compare Figs. 2 and 3 of <a href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016PA002928">Pohl et al. (2016)</a>).</p>

<p>Please note that the GRISLI source code is not freely available.</p>

<h1 id="requirements">Requirements</h1>

<p>Before starting anything, you need to correctly configure your environment by loading the appropriate modules:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module purge
module load netcdf/4.5.0/intel/2018
module load intel/2018
module load cdo
module load nco
module load python/3.6
</code></pre></div></div>

<p>For comparison, here should be the result of the <code class="language-plaintext highlighter-rouge">module list</code> command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Currently Loaded Modulefiles:
 1<span class="o">)</span> netcdf/4.5.0/intel/2018   3<span class="o">)</span> cdo/1.9.2/intel/2018   5<span class="o">)</span> python/3.6/intel/2019
 2<span class="o">)</span> intel/2018                4<span class="o">)</span> nco/4.7.7/intel/2018
</code></pre></div></div>

<p>Remark: At some point, following cluster module updates, we will probably have to change some modules. Ideally, we‚Äôll also have to check that results are identical.</p>

<h1 id="installing-and-compiling">Installing and compiling</h1>

<ol>
  <li>
    <p>Download the model source code plus useful files from <a href="https://sdrive.cnrs.fr/s/2sNwLBHHsyFeeE8">here</a>. Then, uncompress the directory on your work <code class="language-plaintext highlighter-rouge">/work/crct/zz9999zz</code> (replace <code class="language-plaintext highlighter-rouge">zz9999zz</code> with your CCUB login) (using <code class="language-plaintext highlighter-rouge">unzip GRISLI.zip</code>). As for now, the model source code is not freely available; this is why the .zip archive is password-protected. Then, enter the model directory <code class="language-plaintext highlighter-rouge">cd GRISLI/GRISLI-version8-svn</code>.</p>
  </li>
  <li>
    <p>On the CCUB cluster, you should be all set with libraries correctly linked in the file named <code class="language-plaintext highlighter-rouge">Makefile</code> located in the <code class="language-plaintext highlighter-rouge">SOURCES</code> directory on lines 25‚Äì53:</p>
  </li>
</ol>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">NCDF_INC</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">/</span><span class="n">soft</span><span class="p">/</span><span class="n">c7</span><span class="p">/</span><span class="n">netcdf</span><span class="p">/</span><span class="mf">4.5.0</span><span class="p">/</span><span class="n">intel</span><span class="p">/</span><span class="mi">2018</span><span class="p">/</span><span class="k">include</span><span class="w">
</span><span class="n">NCDF_LIB</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="p">/</span><span class="n">soft</span><span class="p">/</span><span class="n">c7</span><span class="p">/</span><span class="n">netcdf</span><span class="p">/</span><span class="mf">4.5.0</span><span class="p">/</span><span class="n">intel</span><span class="p">/</span><span class="mi">2018</span><span class="p">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">lnetcdff</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="p">/</span><span class="n">soft</span><span class="p">/</span><span class="n">c7</span><span class="p">/</span><span class="n">netcdf</span><span class="p">/</span><span class="mf">4.5.0</span><span class="p">/</span><span class="n">intel</span><span class="p">/</span><span class="mi">2018</span><span class="p">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">lnetcdf</span><span class="w"> </span><span class="o">-</span><span class="n">lnetcdf</span><span class="w">
</span><span class="n">MKL_LIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="err">${</span><span class="n">MKLROOT</span><span class="err">}</span><span class="p">/</span><span class="n">lib</span><span class="p">/</span><span class="n">intel64</span><span class="w"> </span><span class="o">-</span><span class="n">lmkl_intel_lp64</span><span class="w"> </span><span class="o">-</span><span class="n">lmkl_sequential</span><span class="w"> </span><span class="o">-</span><span class="n">lmkl_core</span><span class="w"> </span><span class="o">-</span><span class="n">liomp5</span><span class="w"> </span><span class="o">-</span><span class="n">lpthread</span><span class="w">
</span><span class="n">IFORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifort</span><span class="w">
</span></code></pre></div></div>

<ol start="3">
  <li>
    <p>Stay in the <code class="language-plaintext highlighter-rouge">SOURCES</code> directory and <code class="language-plaintext highlighter-rouge">make clean</code> to clean compiling directory from previous iterations.</p>
  </li>
  <li>
    <p>Compile by typing in <code class="language-plaintext highlighter-rouge">make Maassud</code>. Everything going well, you should get an executable called <code class="language-plaintext highlighter-rouge">Maassud</code> in directory <code class="language-plaintext highlighter-rouge">GRISLI-version8-svn/bin</code>. Now, the model is compiled and ready to run. Let‚Äôs see how to launch an experiment from a directory with all boundary conditions ready. We will see how to create these boundary conditions later.</p>
  </li>
</ol>

<p>At this point, you are probably wondering: why <code class="language-plaintext highlighter-rouge">Maassud</code> üßê ? To avoid making you wake up at night wondering about this, here is an explanation. This is some heritage from Christophe Dumas‚Äô naming, when Christophe designed a model grid to study the Maastrichtian southern hemisphere for Yannick. Every important mystery has a fascinating explanation.</p>

<h1 id="running-an-experiment-from-existing-boundary-conditions">Running an experiment from existing boundary conditions</h1>

<h2 id="directory-containing-the-boundary-conditions">Directory containing the boundary conditions</h2>

<p>The model boundary conditions live in directory <code class="language-plaintext highlighter-rouge">GRISLI-version8-svn/INPUT/MAASSUD</code>. They consist in 3 types of files. For illustration purposes, we will use an Ordovician setup for 440 Ma in the following, derived from a LDMZ simulation conducted at 1680 ppm pCO2 under a cold summer orbital configuration:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">t2m_440tcCSO1680_hemisud.ijz</code> is a file providing GRISLI with monthly surface air temperature data interpolated onto the (40 km √ó 40 km) model grid.</li>
  <li><code class="language-plaintext highlighter-rouge">precip_440tcCSO1680_hemisud.ijz</code> is the same but for precipitations.</li>
  <li><code class="language-plaintext highlighter-rouge">topo_440tc_hemisud.dat</code> is the file providing the topography and bathymetry.</li>
</ul>

<p>These 3 files are here provided together with the model source code for your added convenience and will be used below to run a GRISLI simulation. They are associated with the study by <a href="https://www.sciencedirect.com/science/article/pii/S0012821X22003533">Marcilly et al. (2022)</a>, although we eventually did not use the GRISLI results in the paper.</p>

<p>While the climatic boundary conditions (i.e., <code class="language-plaintext highlighter-rouge">t2m</code> and <code class="language-plaintext highlighter-rouge">topo</code> files) will generally be specific to one experiment, the <code class="language-plaintext highlighter-rouge">topo</code> boundary conditions may be used for several GRISLI runs, for instance under different pCO2 levels and/or orbital configurations under the same paleogeographical configuration.</p>

<h2 id="launching-a-simulation">Launching a simulation</h2>

<p>In directory <code class="language-plaintext highlighter-rouge">GRISLI-version8-svn/RESULTATS</code>, you will find a run directory named <code class="language-plaintext highlighter-rouge">440tc_CSO_1680</code> that is almost ready to run. Enter this directory.</p>

<ol>
  <li>
    <p>Copy the executable that you previously compiled: <code class="language-plaintext highlighter-rouge">cp ../../bin/Maassud .</code>.</p>
  </li>
  <li>
    <p>In file <code class="language-plaintext highlighter-rouge">Job</code>, replace <code class="language-plaintext highlighter-rouge">zz9999zz</code> with your login.</p>
  </li>
  <li>
    <p>Submit the simulation in batch mode: <code class="language-plaintext highlighter-rouge">qsub Job</code>.</p>
  </li>
  <li>
    <p>Check that the simulation is running with the command <code class="language-plaintext highlighter-rouge">qstat</code>: you should see a job named <code class="language-plaintext highlighter-rouge">j440CO06X</code> running. In the run directory (where you should still be), files like <code class="language-plaintext highlighter-rouge">440CO06X-k0000.hz</code> should rapidly appeaer. Well done, the model is running and generating some output !</p>
  </li>
</ol>

<p>Now, let‚Äôs take a few minutes to have a look at what the files that we used to launch the simulations contain.</p>

<h3 id="content-of-file-job">Content of file <code class="language-plaintext highlighter-rouge">Job</code></h3>

<p>File <code class="language-plaintext highlighter-rouge">Job</code> (content copied below) is a bash script that provides all necessary instructions to launch the simulation in batch mode. In detail, it requests to launch the simulation using 1 processor under a specific run name (<code class="language-plaintext highlighter-rouge">j440CO06X</code>) that will appear when executing the command <code class="language-plaintext highlighter-rouge">qstat</code>. It loads the modules needed, defines the path to the run directory as well as the file used for the model standard output, and finally requests to run the executable <code class="language-plaintext highlighter-rouge">Maassud</code> and to compress the output when the simulation finishes.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#$ -N j440CO06X</span>
<span class="c">#$ -pe dmp* 1</span>
<span class="c">#$ -q batch</span>

module purge
module load netcdf/4.5.0/intel/2018
module load intel/2018

<span class="c"># donne le chemin du repertoire des resultats du run "Dir_result"</span>
<span class="nv">Dir_result</span><span class="o">=</span><span class="s1">'440tc_CSO_1680'</span>

<span class="c"># Chemin d'acces au repertoire des resultats :</span>
<span class="nv">Dir_exec</span><span class="o">=</span><span class="s1">'/work/crct/zz9999zz/GRISLI/GRISLI-version8-svn/RESULTATS/'</span>

<span class="nv">Execution</span><span class="o">=</span><span class="k">${</span><span class="nv">Dir_exec</span><span class="k">}${</span><span class="nv">Dir_result</span><span class="k">}</span>
<span class="nv">fileout</span><span class="o">=</span><span class="k">${</span><span class="nv">Dir_result</span><span class="k">}</span>.out

<span class="nb">cd</span> <span class="k">${</span><span class="nv">Execution</span><span class="k">}</span>
<span class="nb">time</span> ./Maassud <span class="o">&gt;</span>&amp; <span class="k">${</span><span class="nv">fileout</span><span class="k">}</span>

<span class="c"># ziper les gros fichiers :</span>
<span class="nb">gzip</span> <span class="nt">-f</span> <span class="k">*</span>.hz
</code></pre></div></div>

<h3 id="content-of-file-maassud_param_listdat">Content of file <code class="language-plaintext highlighter-rouge">maassud_param_list.dat</code></h3>

<p>File <code class="language-plaintext highlighter-rouge">maassud_param_list.dat</code> provides an ensemble of parameter values defining the simulation. It is relatively lengthy and we will focus on important parts below. Other parameters should be kept unchanged in most cases.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span>___________________________________________________________
&amp;runpar                  <span class="o">!</span> nom <span class="nb">du </span>bloc  parametres <span class="nb">du </span>run

 runname      <span class="o">=</span>  <span class="s2">"440CO06X"</span>        <span class="o">!</span> 8 caracteres
 comment_run  <span class="o">=</span> <span class="s2">"440tc CSO oneway 1680 ppm"</span>
<span class="o">!</span>___________________________________________________________
</code></pre></div></div>

<p>The block above defines a run name (<code class="language-plaintext highlighter-rouge">440CO06X</code>) that will be used to name the output files. Line <code class="language-plaintext highlighter-rouge">comment_run</code> allows the user to provide all info that may be necessary to keep track of what was done. This is basically a free space that should allow to come back to the file later and have an overview/reminder of the simulation design.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span>___________________________________________________________
&amp;topo_file
 file1        <span class="o">=</span>  <span class="s2">"topo_440tc_hemisud.dat"</span>    <span class="o">!</span> <span class="s2">"topo-21k.g40"</span>
 file2        <span class="o">=</span>  <span class="s2">"topo_440tc_hemisud.dat"</span>    <span class="o">!</span>  hemin2.g40
<span class="o">!</span>___________________________________________________________
</code></pre></div></div>

<p>The block above is used to provide the topo-bathy filename (repeated).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span>___________________________________________________________
&amp;timesteps                <span class="o">!</span> bloc timestep

 tend      <span class="o">=</span>   300000.
<span class="o">!</span>___________________________________________________________
</code></pre></div></div>

<p>The duration of the simulation, expressed in years. 300 kyrs should be enough to reach ice-sheet equilibrium (representing around 2 days of wall-clock computation time). This long duration is the reason why coupled climate-ice-sheet models are difficult to run: GCMs are usually run over a few weeks to months to simulate 2000 years; running a 300-kyr simulation would take years / decades ! Hence the asynchronous coupling methods developed in paleo applications.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span>___________________________________________________________
&amp;snap_forcage_mois                                   <span class="o">!</span> module climat_forcage_mois_mod
filtr_t1 <span class="o">=</span> <span class="s2">"t2m_440tcCSO1680_hemisud.ijz"</span>
filtr_p1 <span class="o">=</span> <span class="s2">"precip_440tcCSO1680_hemisud.ijz"</span>
<span class="o">!</span>___________________________________________________________
</code></pre></div></div>
<p>Above are provided the climatic boundary conditions.</p>

<p>The parameters previously listed in this section are the ones that you will need to adapt to setup your own simulations.</p>

<h1 id="generating-your-own-boundary-conditions">Generating your own boundary conditions</h1>

<h2 id="t2m-and-precip">t2m and precip</h2>

<p>The work will be done in directory <code class="language-plaintext highlighter-rouge">GRISLI/generate_boundary_conditions</code>. Here is located a file named <code class="language-plaintext highlighter-rouge">extract_ORD440-1680_SE_2000_2009_1M_histmth.nc</code>, which is an LMDZ output file for a simulation ran at 440 Ma and 1680 ppm pCO2, under a median orbital configuration.</p>

<ol>
  <li>Generate 12 monthly files by running the following cdo command (this is why we loaded the module cdo when we started this tutorial):</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdo splitmon extract_ORD440-1680_SE_2000_2009_1M_histmth.nc MONTH/440tc_EccN_1680_month
</code></pre></div></div>
<p>You should obtain 12 files in the form <code class="language-plaintext highlighter-rouge">440tc_EccN_1680_month??.nc</code> in directory <code class="language-plaintext highlighter-rouge">GRISLI/generate_boundary_conditions/MONTH</code>.</p>

<ol start="2">
  <li>Interpolate these climatic boundary conditions onto the GRISLI grid by entering directory <code class="language-plaintext highlighter-rouge">GRISLI/generate_boundary_conditions/interpolate_to_GRISLI_grid</code> and executing the bash script <code class="language-plaintext highlighter-rouge">LMDZ_2_GRISLI_cdo_updated.ksh</code>:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./LMDZ_2_GRISLI_cdo_updated.ksh
</code></pre></div></div>

<p>The script will ask you to chose the variable that you want to interpolate. First run the script for <code class="language-plaintext highlighter-rouge">t2m</code>, then do the same for <code class="language-plaintext highlighter-rouge">precip</code>. If everything goes well, the script should provide some graphical output (with the Antarctic coastline overlain, this is expected) and you should obtain two files <code class="language-plaintext highlighter-rouge">t2m_440tcEccN1680_hemisud.ijz</code> and <code class="language-plaintext highlighter-rouge">precip_440tcEccN1680_hemisud.ijz</code>.</p>

<ol start="3">
  <li>Place these climatic forcing fields into <code class="language-plaintext highlighter-rouge">GRISLI/GRISLI-version8-svn/INPUT</code>. They are ready to be used for your own experiments.</li>
</ol>

<h2 id="topo">topo</h2>

<ol>
  <li>In directory <code class="language-plaintext highlighter-rouge">GRISLI/generate_boundary_conditions/TOPO</code>, you will find a topo-bathy file named <code class="language-plaintext highlighter-rouge">ReliefBathy4GRISLI_HP.nc</code>. The attributes of this NetCDF file are not what cdo (hence script <code class="language-plaintext highlighter-rouge">LMDZ_2_GRISLI_cdo_updated.ksh</code>) expects. Therefore, we need to adapt the file to make it cdo-compatible. For that, just do the following:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./adapt_for_cdo.sh
</code></pre></div></div>
<p>You should obtain a file named <code class="language-plaintext highlighter-rouge">ReliefBathy4GRISLI_HP_4cdo.nc</code>.</p>

<ol start="2">
  <li>
    <p>Go back to <code class="language-plaintext highlighter-rouge">GRISLI/generate_boundary_conditions/interpolate_to_GRISLI_grid</code> and run <code class="language-plaintext highlighter-rouge">LMDZ_2_GRISLI_cdo_updated.ksh</code> for variable <code class="language-plaintext highlighter-rouge">topo</code>.</p>
  </li>
  <li>
    <p>Add file header by hand (for an example, see <code class="language-plaintext highlighter-rouge">GRISLI/GRISLI-version8-svn/INPUT/MAASSUD/topo_440tcHP_hemisud.dat</code></p>
  </li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 440tc using coord_hemisud_yannick.dat
  94249 3 307 307 40.0
   Xkm     Ykm     B
</code></pre></div></div>

<ol start="4">
  <li>Just like we did for <code class="language-plaintext highlighter-rouge">t2m</code>and <code class="language-plaintext highlighter-rouge">precip</code>, place the resulting file <code class="language-plaintext highlighter-rouge">topo_440tcHP_hemisud.dat</code> in <code class="language-plaintext highlighter-rouge">GRISLI/GRISLI-version8-svn/INPUT</code>.</li>
</ol>

<p>You are now ready to run your own experiment, by creating a new run directory and adapting the content of the files <code class="language-plaintext highlighter-rouge">Job</code> and <code class="language-plaintext highlighter-rouge">maassud_param_list.dat</code>to notably include the names of the files you created: <code class="language-plaintext highlighter-rouge">t2m_440tcEccN1680_hemisud.ijz</code>, <code class="language-plaintext highlighter-rouge">precip_440tcEccN1680_hemisud.ijz</code> and <code class="language-plaintext highlighter-rouge">topo_440tcHP_hemisud.dat</code>. As a reminder, the run directory will have to include the files <code class="language-plaintext highlighter-rouge">Job</code> and <code class="language-plaintext highlighter-rouge">maassud_param_list.dat</code> and the executable <code class="language-plaintext highlighter-rouge">Maassud</code>.</p>

<h1 id="checking-for-equilibrium-and-looking-at-the-output">Checking for equilibrium and looking at the output</h1>

<h2 id="checking-for-equilibrium">Checking for equilibrium</h2>

<p>To check for equilibrium, one usually looks at time series of ice-sheet extent and volume.</p>

<p>A gnuplot (!) script <code class="language-plaintext highlighter-rouge">GRISLI/analysis/plots_GRISLI.plt</code> is provided for that purpose. It plots key columns of the synthetic output file <code class="language-plaintext highlighter-rouge">short*.ritz</code> to show the time-evolution of land-ice extent and volume. In the figure below for instance, it looks like the volume took 250 kyrs to reach a steady-state.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gnuplot plots_GRISLI.plt
</code></pre></div></div>

<p>Interestingly, the file <code class="language-plaintext highlighter-rouge">short*.ritz</code> is updated during the simulation, not written at the end. Hence, it is possible to look at the evolution of land-ice volume and extent while GRISLI is running.</p>

<p><img src="/assets/img/GRISLI_checkevol.png" alt="GRISLI volume" class="center" /></p>

<p>Of course, the same kind of figure could easily be drawn with Python if you don‚Äôt feel like using gnuplot.</p>

<p>If equilibrium has not been reached, the easiest solution is just to rerun the simulation from scratch for a longer duration. It is very cheap in terms of CPU time. Just be aware that every GRISLI run represents a lots of output data, hence mind your storage capacity and do not hesitate deleting useless simulations.</p>

<h2 id="looking-at-the-results">Looking at the results</h2>

<h3 id="generating-a-netcdf-file">Generating a NetCDF file</h3>

<p>GRISLI does output a NetCDF file, e.g. <code class="language-plaintext highlighter-rouge">440CO06X.nc</code> in the case of simulation <code class="language-plaintext highlighter-rouge">GRISLI/GRISLI-version8-svn/RESULTATS/440tc_CSO_1680/440tc_CSO_1680</code>. You can plot the output, using for instance Ferret. However, the info is stored on the GRISLI irregular grid (every grid point is a square of 40 km, rather than a grid point with regular lon-lat dimensions). The easiest way to visualize the output is to regrid the NetCDF file onto a regular grid (of your desired resolution; a grid file named <code class="language-plaintext highlighter-rouge">Grid_LMDZ_for_GRISLI_curv2rect.txt</code> is here provided and can be adapted as you wish):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdo remapbil,../Grid_LMDZ_for_GRISLI_curv2rect.txt 440CO06X.nc 440CO06X_rect.nc
</code></pre></div></div>

<h3 id="plotting">Plotting</h3>

<p>This regridded file can be inspected using Ferret (remember that GRISLI ran on a regional grid centered over the South Pole, hence the missing data over the rest of the planet).</p>

<p><img src="/assets/img/GRISLI_map_Ferret.png" alt="GRISLI map Ferret" class="center" /></p>

<p>I also included a Python script that permits to easily handle projections etc.: <code class="language-plaintext highlighter-rouge">GRISLI/analysis/map_GRISLI.py</code>.</p>

<p><img src="/assets/img/GRISLI_map_Python.png" alt="GRISLI map Python" class="center" /></p>

<p>Of course, it is then possible to plot the GRISLI output on top of a <em>global</em> paleogeographical map.</p>

<h3 id="overview-of-grisli-output-variables">Overview of GRISLI output variables</h3>

<p>The NetCDF is poorly formatted. As a rapid overview of the variables, here is an old file giving some key info.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0       var     4       coeff.cpt       Variable_code
1       Scoul   5       Surf_Pollard.cpt        Surface elevation <span class="o">(</span>m<span class="o">)</span> <span class="o">(</span>Surf_Pollard.cpt glace_bleu.cpt gray_ice_white3.cpt<span class="o">)</span>
2       H       5       thick-tof.cpt   Ice thickness <span class="o">(</span>m<span class="o">)</span> <span class="o">(</span>thick-wysiwyg3.cpt<span class="o">)</span>gray_ice_white3.cpt
3       B       4       socle-antar.cpt Bed elevation <span class="o">(</span>m<span class="o">)</span>
4       MK      4       posxy.cpt       Masque
5       HDOT    2       hdot.cpt        hdot <span class="o">(</span>m/an<span class="o">)</span>
6       ICE     4       posxy.cpt       Masque glace <span class="nt">-ICE-</span>
10      Bm      4       BM.cpt  BM-snowball.cpt        Bilan de masse <span class="o">(</span>m/an<span class="o">)</span>
11      ACC     4       Acc-Tof.cpt             Accumulation rate <span class="o">(</span>m water eq.<span class="o">)</span>
12      ABL     4       Abl-Tof.cpt     Ablation rate <span class="o">(</span>m water eq.<span class="o">)</span>
13      Calv    4       Calv.cpt        Calving <span class="o">(</span>reste a definir<span class="o">)</span>
14      DHDT    4       hdot.cpt        dhdt lagrangien <span class="o">(</span>m/an<span class="o">)</span>
15      PDD     4       pdd.cpt         Postive Degree Day
16      SIMAX   4       simax.cpt       Refreezed ice <span class="o">(</span>m<span class="o">)</span>
18      Tann    4       Tann.cpt    Tann-snowball.cpt   Annual Surf. Temperature <span class="o">(</span>&lt;b0&gt;C<span class="o">)</span>
19      Tsumm   4       Tjja.cpt        Summer Surf. Temperature <span class="o">(</span>&lt;b0&gt;C<span class="o">)</span>
20      TB      2       Tbasale.cpt     Basal Temperature <span class="o">(</span>&lt;b0&gt;C<span class="o">)</span>
23      phi     2       geophy.cpt      Flux geothermique <span class="o">(</span>mW/m2<span class="o">)</span>
24      phid    2       geophy.cpt      Flux deformation <span class="o">(</span>mW/m2<span class="o">)</span>
25      BMEL    2       bmelt-hi.cpt    Basal melting rate <span class="o">(</span>m water eq.<span class="o">)</span>
30      UXB     2       vitesses-direction.cpt uxbar
31      UYB     2       vitesses-direction.cpt uybar
32      UX1/2   2       vitesses-direction.cpt uxbar 1/2
33      UY1/2   2       vitesses-direction.cpt uybar 1/2
34      UXSL    2       vitesses-direction.cpt ux sliding
35      UYSL    2       vitesses-direction.cpt uy sliding
40      FROTMX  1       frotm.cpt       frotmx <span class="o">(</span>bar<span class="o">)</span>
41      FROTMY  1       frotm.cpt       frotmy <span class="o">(</span>bar<span class="o">)</span>
42      TOBMX   1       tob.cpt       tobmx <span class="o">(</span>bar<span class="o">)</span>
43      TOBMY   1       tob.cpt       tobmy <span class="o">(</span>bar<span class="o">)</span>
44      Taushelf 2      tob.cpt contrainte moyenne shelves <span class="o">(</span>bar<span class="o">)</span>
45      EPSXX   2       colepsfin.cpt   epsilon xx <span class="o">(</span>a-1<span class="o">)</span>
46      EPSYY   2       colepsfin.cpt   epsilon yy <span class="o">(</span>a-1<span class="o">)</span>
47      EPSXY   2       colepsfin.cpt   epsilon xy <span class="o">(</span>a-1<span class="o">)</span>
48      EPS     2       colepsfin.cpt   epsilon <span class="o">(</span>a-1<span class="o">)</span>
50      PVI     3       pvi.cpt         pvi
60      HWAT    1       hwater-Tof.cpt  Basal water  hydraulic height <span class="o">(</span>m<span class="o">)</span>
61      HDWAT   1       hwatdot.cpt     Basal water evol <span class="o">(</span>m/an<span class="o">)</span>
62      PGX     4       pgxy-fin.cpt    Basal hydro. grad./x
63      PGY     4       pgxy-fin.cpt    Basal hydro. grad./y
64      KOND    1       Basal   hydro. conductivity
68      NFMX    1       colnefmx.cpt    Effective Pressure <span class="o">(</span>Bar<span class="o">)</span>
69      NFMY    1       colnefmx.cpt    Effective Pressure <span class="o">(</span>Bar<span class="o">)</span>
70      POSX    4       posxy.cpt       Posx: 0-ground 1-stream 2-ile 3-flot
71      POSY    4       posxy.cpt       Posy: 0-ground 1-stream 2-ile 3-flot
100     DIVERS  4       divers.cpt      fichier colonne
<span class="nt">-1</span>      GS      2       Surface elevation grad. <span class="o">(</span>1<span class="o">)</span>
<span class="nt">-30</span>     UMAG    2       speed.cpt       Ice velocities <span class="o">(</span>m/a<span class="o">)</span>
<span class="nt">-34</span>     Uslid   2       speed.cpt       Sliding velocity <span class="o">(</span>m/a<span class="o">)</span>
<span class="nt">-68</span>     NEFFM   1       colnefmx.cpt    Effective Pressure <span class="o">(</span>Bar<span class="o">)</span>
<span class="nt">-40</span>     FROTM   1       frotm.cpt       Basal  drag <span class="o">(</span>bar ?<span class="o">)</span>
<span class="nt">-42</span>     TOB     1       tob.cpt         taub
<span class="nt">-62</span>     PGMAG   4       pgmag-fin.cpt   hydro. pressure. gradient <span class="o">(</span>Pa/m<span class="o">)</span>
<span class="nt">-130</span>    FLUX    2       flux.cpt        Ice Flux <span class="o">(</span>1e2 km3.a-1<span class="o">)</span>
<span class="nt">-162</span>    FLUXW   1       fluxwat.cpt     Basal water flux <span class="o">(</span>m3.a-1<span class="o">)</span>
</code></pre></div></div>

<h1 id="known-issues">Known issues</h1>

<h2 id="colinear-vectors">Colinear vectors</h2>

<p>Sometimes GRISLI crashes because it cannot compute ice-sheet dynamics due to vector co-linearity. In this case, there is no known solution: just change your experimental setup to avoid the situation (which luckily remains rare).</p>


  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2025 Alexandre  POHL.
    
    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
